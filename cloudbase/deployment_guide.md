# ç®¡ç†å‘˜ç™»å½•åŠŸèƒ½éƒ¨ç½²æŒ‡å—

## ğŸš€ éƒ¨ç½²æ­¥éª¤

### 1. åˆ›å»ºæ•°æ®åº“é›†åˆ

åœ¨äº‘å¼€å‘æ§åˆ¶å°åˆ›å»ºä»¥ä¸‹é›†åˆï¼š

#### âœ… å·²æœ‰é›†åˆ
- `users` - ç”¨æˆ·è¡¨
- `door_logs` - å¼€é—¨è®°å½•è¡¨  
- `sms_codes` - çŸ­ä¿¡éªŒè¯ç è¡¨
- `login_logs` - ç™»å½•æ—¥å¿—è¡¨

#### ğŸ†• éœ€è¦æ–°å»ºçš„é›†åˆ
- `admins` - ç®¡ç†å‘˜è¡¨
- `devices` - è®¾å¤‡ç®¡ç†è¡¨
- `admin_logs` - ç®¡ç†å‘˜æ“ä½œæ—¥å¿—è¡¨
- `system_config` - ç³»ç»Ÿé…ç½®è¡¨

### 2. æ·»åŠ ç¤ºä¾‹æ•°æ®

#### admins é›†åˆ
```json
{
  "username": "admin",
  "password": "e10adc3949ba59abbe56e057f20f883e",
  "email": "admin@company.com",
  "role": "ADMIN",
  "permissions": ["dashboard", "user_management", "system_config"],
  "realName": "ç³»ç»Ÿç®¡ç†å‘˜",
  "phone": "13800000000",
  "status": "active",
  "lastLoginTime": "2024-05-29T10:30:00.000Z",
  "loginCount": 256,
  "createTime": "2024-01-01T00:00:00.000Z",
  "updateTime": "2024-05-29T10:30:00.000Z"
}
```

#### devices é›†åˆ
```json
{
  "deviceId": "LOCK-01",
  "deviceName": "åŠå…¬æ¥¼å¤§é—¨",
  "deviceType": "door_lock",
  "location": "åŒ—äº¬å¸‚æœé˜³åŒºåŠå…¬æ¥¼ä¸€å±‚",
  "ipAddress": "192.168.1.100",
  "status": "online",
  "lastHeartbeat": "2024-05-29T10:25:00.000Z",
  "installDate": "2024-01-15T00:00:00.000Z",
  "maintainDate": "2024-03-15T00:00:00.000Z",
  "createTime": "2024-01-15T00:00:00.000Z",
  "updateTime": "2024-05-29T10:25:00.000Z"
}
```

#### admin_logs é›†åˆ
```json
{
  "adminId": "64a1b2c3d4e5f67890123456",
  "adminName": "admin",
  "action": "view_dashboard",
  "description": "æŸ¥çœ‹æ•°æ®å¤§å±",
  "targetType": "dashboard",
  "targetId": null,
  "ipAddress": "192.168.1.10",
  "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7)",
  "result": "success",
  "createTime": "2024-05-29T10:30:00.000Z"
}
```

#### system_config é›†åˆ
```json
{
  "configKey": "sms_frequency_limit",
  "configValue": "60",
  "configType": "number",
  "description": "çŸ­ä¿¡å‘é€é¢‘ç‡é™åˆ¶(ç§’)",
  "category": "sms",
  "isEditable": true,
  "createTime": "2024-01-01T00:00:00.000Z",
  "updateTime": "2024-05-29T10:30:00.000Z"
}
```

### 3. éƒ¨ç½²äº‘å‡½æ•°

åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­ï¼š

1. å³é”® `cloudfunctions/adminLogin` â†’ **ä¸Šä¼ å¹¶éƒ¨ç½²**
2. å³é”® `cloudfunctions/getDashboardData` â†’ **ä¸Šä¼ å¹¶éƒ¨ç½²**
3. éªŒè¯éƒ¨ç½²æˆåŠŸ

### 4. æƒé™é…ç½®

æ‰€æœ‰é›†åˆæƒé™è®¾ç½®ä¸ºï¼š**ä»…åˆ›å»ºè€…å¯è¯»å†™**

### 5. æµ‹è¯•ç®¡ç†å‘˜ç™»å½•

**é»˜è®¤ç®¡ç†å‘˜è´¦æˆ·ï¼š**
- **ç”¨æˆ·å**: `admin`
- **å¯†ç **: `123456`

**æµ‹è¯•æ­¥éª¤ï¼š**
1. è¿›å…¥ç®¡ç†å‘˜ç™»å½•é¡µé¢
2. è¾“å…¥ç”¨æˆ·åï¼š`admin`
3. è¾“å…¥å¯†ç ï¼š`123456`
4. ç‚¹å‡»ç™»å½•
5. éªŒè¯æ˜¯å¦è·³è½¬åˆ°æ•°æ®å¤§å±

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ğŸ” çœŸå®è®¤è¯
- å¯†ç MD5åŠ å¯†å­˜å‚¨
- Tokenç”Ÿæˆå’ŒéªŒè¯
- æƒé™æ£€æŸ¥

### ğŸ“Š ç®¡ç†å‘˜ä¿¡æ¯æ˜¾ç¤º
- å¯¼èˆªæ æ˜¾ç¤ºç®¡ç†å‘˜å§“å
- ä¸ªæ€§åŒ–é€€å‡ºç¡®è®¤

### ğŸ›¡ï¸ å®‰å…¨æœºåˆ¶
- ç™»å½•å¤±è´¥è®°å½•
- æƒé™éªŒè¯
- è‡ªåŠ¨è·³è½¬ç™»å½•é¡µ

### ğŸ”„ çŠ¶æ€ç®¡ç†
- æœ¬åœ°å­˜å‚¨ç®¡ç†å‘˜ä¿¡æ¯
- ç™»å½•çŠ¶æ€æŒä¹…åŒ–
- å®‰å…¨é€€å‡ºæ¸…ç†

## ğŸ› æ•…éšœæ’é™¤

### ç™»å½•å¤±è´¥
1. æ£€æŸ¥äº‘å‡½æ•°æ˜¯å¦éƒ¨ç½²æˆåŠŸ
2. éªŒè¯adminsé›†åˆæ˜¯å¦åˆ›å»º
3. ç¡®è®¤ç”¨æˆ·åå¯†ç æ­£ç¡®

### æƒé™é”™è¯¯
1. æ£€æŸ¥permissionså­—æ®µåŒ…å«'dashboard'
2. éªŒè¯ç®¡ç†å‘˜çŠ¶æ€ä¸º'active'
3. ç¡®è®¤adminInfoå­˜å‚¨æ­£ç¡®

### äº‘å‡½æ•°é”™è¯¯
1. æŸ¥çœ‹äº‘å‡½æ•°æ—¥å¿—
2. æ£€æŸ¥æ•°æ®åº“è¿æ¥
3. éªŒè¯é›†åˆæƒé™é…ç½® 